angular.module("SuhExternal",[]),angular.module("SuhExternal").provider("shFacebook",["$q","shEventEmitter",function(e,t){var n="",i=function(e,t,n,i){var r,o=e.getElementsByTagName(t)[0];return e.getElementById(n)?void(i&&i()):(r=e.createElement(t),r.id=n,r.src="//connect.facebook.net/en_US/sdk.js",void o.parentNode.insertBefore(r,o))},r=function(e){!e||e.error?defer.reject("Error occured"):defer.resolve(e)},o=function(e){return r};this.setResponseHandler=function(e){r=e},this.setResponseWrapper=function(e){o=e},this.setAppId=function(e){n=e};var a=function(e){if(t.call(this),this.listeners={},this.loginData={},!e)throw new Error("Facebook application ID cannot be empty");this.appId=e,window.FB||(window.fbAsyncInit=angular.bind(this,self.onLoaded,window.fbAsyncInit)),i(document,"script","facebook-jssdk",angular.bind(this,this.onLoaded()))};a.prototype=angular.extend({},t.prototype,{initialize:function(){FB.init({appId:this.appId,status:!0,cookie:!0,xfbml:!0,version:"v2.3"})},getPermissions:function(){return this.__get("/me/permissions")},hasPermission:function(e){return this.getPermissions().then(function(t){for(var n,i,r=t.data||[],o=r.length,a=angular.isArray(e)?e.slice(0):[e],s=!1;i=a.shift();){for(s=!1,n=0;o>n;n++)if(r[n].permission==i){s=!0;break}if(!s)return!1}return!0},function(e){return!1})},resendPermissionRequest:function(e){FB.login(this.onLoginStatusChange,{scope:e,auth_type:"rerequest"})},login:function(e){var t=e?{scope:e}:void 0;FB.login(angular.bind(this,this.onLoginStatusChange),t)},logout:function(){FB.logout(angular.bind(this,this.onLogout))},onLogout:function(e){this.trigger("FBLoginStatusChange",{type:"FBLoginStatusChange",data:{status:"logout",loginSuccess:!1,appAccess:!1,authResponse:e.authResponse}})},getLoginStatus:function(){FB.getLoginStatus(angular.bind(this,this.onLoginStatusChange))},onLoginStatusChange:function(e){var t={type:"FBLoginStatusChange",data:{status:"no_info",loginSuccess:!1,appAccess:!1,authResponse:e.authResponse}};"connected"===e.status?(t.data.status="connected",t.data.loginSuccess=!0,t.data.appAccess=!0):"not_authorized"===e.status&&(t.data.status="not_authorized",t.data.loginSuccess=!0,t.data.appAccess=!1),this.loginData=t,this.trigger("FBLoginStatusChange",t)},onLoaded:function(e){e&&angular.isFunction(e)&&e(),this.initialize()},__get:function(t,n){var i=e.defer();return FB.api(t||"/me",n||{},o(i)),i.promise},__ui:function(t){var n=e.defer();return FB.ui(t,o(n)),n.promise},feedLink:function(e){angular.extend({},{method:"feed"},e);return this.__ui(e)},sendLink:function(e){return this.__ui({method:"send",href:e})},shareLink:function(e){return this.__ui({method:"share",href:e})},generateSendUrl:function(e,t,n,i){var r=e.url||e,o=e.redirectUrl||t||document.URL,a=e.display||n,s=e.t||i;return a=a?"&display="+a:"",s=s?"&to="+s:"","http://www.facebook.com/dialog/send?app_id=__APP_ID__&link=__URL__"+"&redirect_uri=__REDIRECT_URL__".replace(/__APP_ID__/,this.appId).replace(/__URL__/,r).replace(/__REDIRECT_URL__/,o)+a+s},shareOpenGraphStory:function(e,t){var n=e.actionType||t||"og.likes",i=e.props||e;return this.__ui({method:"share_open_graph",action_type:n,action_properties:JSON.stringify(i)})},generateShareUrl:function(e,t,n){var i=e.url||e,r=e.redirectUrl||t||document.URL,o=e.display||n||"popup";return"https://www.facebook.com/dialog/share?app_id=__APP_ID__&display=__DISPLAY__&href=__URL__"+"&redirect_uri=__REDIRECT_URL__".replace(/__APP_ID__/,this.appId).replace(/__DISPLAY__/,o).replace(/__URL__/,i).replace(/__REDIRECT_URL__/,r)},generateOpenGraphStoryUrl:function(e,t,n,i){var r=e.actionType||e||"og.likes",o=e.props||t,a=e.disp||i||"popup",s=e.redirectUrl||n||document.URL;return"https://www.facebook.com/dialog/share_open_graph?app_id=__APP_ID__&display=__DISPLAY__&action_type=__ACTION_TYPE__&action_properties="+JSON.stringify(o)+"&redirect_uri=__REDIRECT_URL__".replace(/__APP_ID__/,this.appId).replace(/__DISPLAY__/,a).replace(/__ACTION_TYPE__/,r).replace(/__REDIRECT_URL__/,s)}}),a.prototype.constructor=t,this.$get=[function(e){return new a(n||e)}]}]),angular.module("SuhExternal").factory("shEventEmitter",[function(){function e(){this.listeners={}}return e.prototype={addEventListener:function(e,t,n){this.listeners=this.listeners||{},this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(n?angular.bind(n,t):t)},removeEventListener:function(e,t){if(!this.listeners[e])throw new Error("Event '"+e+"' is not registered.");var n=this.listeners[e].indexOf(t);-1!==n&&this.listeners.splice(n,1)},trigger:function(e,t){if(this.listeners[e]){var n,i,r=this.listeners[e];for(n=0,i=r.length;i>n;n++)r[n](t)}}},e}]),angular.module("SuhExternal").factory("shGoogleGeocoding",["$http","$q","$window",function(e,t,n){var i=function(){MRL.BasicCtrl.call(this,{},[]),this._d=t.defer(),this._initialized=!1,this.coder=null,this.map=null,this.apiKey="",window.onGoogleMapsLoaded=function(){var e=angular.element("html").injector();e.get("external.Geocoding").postInit()},this.postInit()};return i.prototype={init:function(){if(this._initialized)throw _GE(1,"Google Maps API already initialized");var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&callback=onGoogleMapsLoaded",document.body.appendChild(e)},postInit:function(){if(this._initialized)throw _GE(1,"Google Maps API already initialized");this._initialized=!0,this.coder=new google.maps.Geocoder;var e=new google.maps.LatLng(59.33875,18.06857),t={zoom:12,center:e};0==jQuery("#hidden-map-canvas").length&&jQuery("body").append('<div id="hidden-map-canvas" style="display:none;"></div>'),jQuery("#hidden-map-canvas").length>0&&(this.map=new google.maps.Map(document.getElementById("hidden-map-canvas"),t),this.apiKey="AIzaSyBjleysc7ZBJdUdGgeUxTQgbMEer-yFBfU"),this._d.resolve()},ready:function(){return this._d.promise},geocodeAddress:function(e){var n=t.defer();return this.coder.geocode({address:e},function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e):n.reject(t)}),n.promise},reverseGeocode:function(e){var n=t.defer();return this.coder.geocode({latLng:e},function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e):n.reject(t)}),n.promise}},new i}]),angular.module("SuhExternal").factory("shGoogleAnalytics",["$q","$http","shTrackingCode",function(e,t,n){var i=function(){this.init()};return i.prototype={init:function(){},postInit:function(){},sendEvent:function(t,n,i,r){var o=e.defer();return def.resolve(),o.promise}},new i}]),angular.module("SuhExternal").factory("shGoogleMaps",[function(){return{}}]),angular.module("External").factory("shGooglePlaces",["$q","shGoogleGeocoding",function(e,t){var n=function(){this.init()};return n.prototype={init:function(){this.map=t.map,this.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(59.224443,17.776862),new google.maps.LatLng(59.427841,18.198229)),this.places=new google.maps.places.PlacesService(this.map),this._initialized=!0},performSearch:function(t,n){var i=e.defer();return this._initialized?this.places[t](n,jQuery.proxy(function(e,t){t!==google.maps.places.PlacesServiceStatus.OK?i.reject(t):i.resolve(e)},this)):i.reject(),i.promise},nearbySearchByBounds:function(e){return this.performSearch("nearbySearch",{bounds:e})},nearbySearchByLocation:function(e,t,n){return this.performSearch("nearbySearch",{location:new google.maps.LatLng(e,t),radius:n})},getDetails:function(e){return this.performSearch("getDetails",{reference:e})},radarSearch:function(e){return this.performSearch("radarSearch",e)},textSearch:function(e){return this.performSearch("textSearch",{query:e,bounds:this.bounds})}},new n}]);